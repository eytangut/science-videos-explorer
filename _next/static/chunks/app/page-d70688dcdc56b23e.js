(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2598:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eW});var a=r(5155),s=r(2115);let n=function(e,t){let r=(0,s.useCallback)(()=>{try{let r=window.localStorage.getItem(e);return r?JSON.parse(r):t}catch(r){return console.warn('Error reading localStorage key "'.concat(e,'":'),r),t}},[t,e]),[a,n]=(0,s.useState)(r);(0,s.useEffect)(()=>{n(r())},[]);let l=(0,s.useCallback)(t=>{try{let r=t instanceof Function?t(a):t;window.localStorage.setItem(e,JSON.stringify(r)),n(r)}catch(t){console.warn('Error setting localStorage key "'.concat(e,'":'),t)}},[e,a]);return(0,s.useEffect)(()=>{let t=t=>{t.key===e&&null!==t.newValue&&n(JSON.parse(t.newValue))};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}},[e]),[a,l]};var l=r(7481),i=r(9434);let o=s.forwardRef((e,t)=>{let{className:r,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});o.displayName="Input";var d=r(9708),c=r(2085);let u=(0,c.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:l=!1,...o}=e,c=l?d.DX:"button";return(0,a.jsx)(c,{className:(0,i.cn)(u({variant:s,size:n,className:r})),ref:t,...o})});h.displayName="Button";let m=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});m.displayName="Card";let f=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...s})});f.displayName="CardHeader";let p=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});p.displayName="CardTitle";let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...s})});x.displayName="CardDescription";let g=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...s})});g.displayName="CardContent";let b=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...s})});b.displayName="CardFooter";let v="https://www.googleapis.com/youtube/v3";async function y(e,t){let r=t.startsWith("@")?t.substring(1):t.trim(),a="";a=r.startsWith("UC")&&r.length>20?"".concat(v,"/channels?part=snippet,contentDetails&id=").concat(r,"&key=").concat(e):"".concat(v,"/channels?part=snippet,contentDetails&forUsername=").concat(r,"&key=").concat(e);try{let e=await fetch(a);if(!e.ok){var s;let t=await e.json().catch(()=>({error:{message:"API request failed with status ".concat(e.status," and non-JSON response.")}}));throw console.error("Failed to fetch channel details for '".concat(r,"' using ").concat(a.split("?")[0],". Status: ").concat(e.status),t),Error((null==(s=t.error)?void 0:s.message)||"Failed to fetch channel details for '".concat(r,"': ").concat(e.statusText))}let t=await e.json();if(t.items&&t.items.length>0)return t.items[0];return console.warn("Channel not found for identifier: '".concat(r,"' using ").concat(a.split("?")[0],". API returned no items.")),null}catch(e){throw console.error("Exception during fetchChannelDetails for identifier '".concat(r,"':"),e),e}}async function j(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;try{var a,s;let n=await fetch("".concat(v,"/search?part=snippet&channelId=").concat(t,"&order=viewCount&type=video&maxResults=").concat(r,"&key=").concat(e));if(!n.ok){let e=await n.json().catch(()=>({error:{message:"API request failed with status ".concat(n.status," and non-JSON response.")}}));throw console.error("Error fetching popular videos from search:",e),Error((null==(s=e.error)?void 0:s.message)||"Failed to fetch popular videos: ".concat(n.statusText))}return(null==(a=(await n.json()).items)?void 0:a.map(e=>{var t;return null==(t=e.id)?void 0:t.videoId}).filter(e=>!!e))||[]}catch(e){throw console.error("Error in fetchChannelPopularVideoIdsFromSearch:",e),e}}async function w(e,t){if(0===t.length)return[];try{let a=await fetch("".concat(v,"/videos?part=snippet,contentDetails,statistics&id=").concat(t.join(","),"&key=").concat(e));if(!a.ok){var r;let e=await a.json();throw console.error("Error fetching video details:",e),Error((null==(r=e.error)?void 0:r.message)||"Failed to fetch video details: ".concat(a.statusText))}return(await a.json()).items||[]}catch(e){throw console.error("Error in fetchVideosDetails:",e),e}}var N=r(2720),C=r(3576),A=r(4301),k=r(7223),I=r(5452),S=r(5318);let R=I.bL,T=I.l9,V=I.ZL,D=I.bm,E=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(I.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});E.displayName=I.hJ.displayName;let P=s.forwardRef((e,t)=>{let{className:r,children:s,...n}=e;return(0,a.jsxs)(V,{children:[(0,a.jsx)(E,{}),(0,a.jsxs)(I.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...n,children:[s,(0,a.jsxs)(I.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(S.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});P.displayName=I.UC.displayName;let M=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};M.displayName="DialogHeader";let L=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};L.displayName="DialogFooter";let O=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(I.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",r),...s})});O.displayName=I.hE.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(I.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...s})}).displayName=I.VY.displayName;var F=r(7655);let W=s.forwardRef((e,t)=>{let{className:r,children:s,...n}=e;return(0,a.jsxs)(F.bL,{ref:t,className:(0,i.cn)("relative overflow-hidden",r),...n,children:[(0,a.jsx)(F.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,a.jsx)(K,{}),(0,a.jsx)(F.OK,{})]})});W.displayName=F.bL.displayName;let K=s.forwardRef((e,t)=>{let{className:r,orientation:s="vertical",...n}=e;return(0,a.jsx)(F.VM,{ref:t,orientation:s,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...n,children:(0,a.jsx)(F.lr,{className:"relative flex-1 rounded-full bg-border"})})});K.displayName=F.VM.displayName;var U=r(8271),z=r(203),_=r(3926);function Y(e){let{channels:t,onRemoveChannel:r,onReorderChannels:s,open:n,onOpenChange:l,isClientMounted:i}=e,o=(e,r)=>{"up"===r&&e>0?s(e,e-1):"down"===r&&e<t.length-1&&s(e,e+1)};return(0,a.jsxs)(R,{open:n,onOpenChange:l,children:[(0,a.jsx)(T,{asChild:!0,children:(0,a.jsxs)(h,{variant:"outline",disabled:!i,children:[(0,a.jsx)(U.A,{className:"mr-2 h-5 w-5"})," Manage Added Channels"]})}),(0,a.jsxs)(P,{className:"sm:max-w-[525px]",children:[(0,a.jsx)(M,{children:(0,a.jsx)(O,{className:"text-2xl font-headline",children:"Manage Your Channels"})}),i?0===t.length?(0,a.jsx)("p",{className:"text-muted-foreground py-4",children:"No channels added yet. Add one using the panel."}):(0,a.jsx)(W,{className:"max-h-[60vh] pr-3 my-4",children:(0,a.jsx)("ul",{className:"space-y-3",children:t.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-center justify-between p-3 bg-secondary/30 rounded-md shadow",children:[(0,a.jsx)("span",{className:"truncate font-medium flex-1 mr-2",title:e.name,children:e.name}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(h,{variant:"ghost",size:"icon",onClick:()=>o(s,"up"),disabled:0===s,"aria-label":"Move Up",children:(0,a.jsx)(z.A,{className:"h-4 w-4"})}),(0,a.jsx)(h,{variant:"ghost",size:"icon",onClick:()=>o(s,"down"),disabled:s===t.length-1,"aria-label":"Move Down",children:(0,a.jsx)(_.A,{className:"h-4 w-4"})}),(0,a.jsx)(h,{variant:"ghost",size:"icon",onClick:()=>r(e.id),"aria-label":"Remove Channel",children:(0,a.jsx)(k.A,{className:"h-4 w-4 text-destructive"})})]})]},e.id))})}):(0,a.jsx)("p",{className:"text-muted-foreground py-4",children:"Loading channel list..."}),(0,a.jsx)(L,{children:(0,a.jsx)(D,{asChild:!0,children:(0,a.jsx)(h,{type:"button",variant:"secondary",children:"Close"})})})]})]})}function J(e){let{channels:t,onAddChannel:r,onRemoveChannel:n,onReorderChannels:i,onRefreshVideos:d,onClearCache:c,apiKey:u,onSetApiKey:b,isLoadingVideos:v,isClientMounted:j}=e,[w,I]=(0,s.useState)(""),[S,R]=(0,s.useState)(!1),[T,V]=(0,s.useState)(u),[D,E]=(0,s.useState)(!1);(0,s.useEffect)(()=>{V(u)},[u]);let P=async e=>{if(e.preventDefault(),!u.trim())return void(0,l.oR)({title:"API Key Required",description:"Please enter your YouTube Data API Key first.",variant:"destructive"});if(!w.trim())return void(0,l.oR)({title:"Channel ID Required",description:"YouTube Channel ID cannot be empty.",variant:"destructive"});R(!0);try{let e=w.trim();e.includes("youtube.com/channel/")?e=e.split("youtube.com/channel/")[1].split("/")[0].split("?")[0]:e.includes("youtube.com/@")&&(e=e.split("youtube.com/@")[1].split("/")[0].split("?")[0],(0,l.oR)({title:"Using Handle",description:'Attempting to use "'.concat(e,'" as channel identifier. For best results, use the Channel ID (starts with UC).'),variant:"default"}));let t=await y(u,e);if(!t)throw Error("Could not find channel details for ID: ".concat(e,". Please ensure it's a valid YouTube Channel ID (e.g., UC...). Custom URLs or handles may require specific API lookups."));r({id:t.id,name:t.snippet.title||"Unnamed Channel",youtubeChannelId:t.id})&&((0,l.oR)({title:"Channel Added",description:"".concat(t.snippet.title," added successfully.")}),I(""))}catch(t){console.error("Failed to add channel:",t);let e=t instanceof Error?t.message:"An unknown error occurred.";(0,l.oR)({title:"Error Adding Channel",description:e,variant:"destructive"})}finally{R(!1)}};return(0,a.jsxs)(m,{className:"w-full shadow-xl",children:[(0,a.jsx)(f,{children:(0,a.jsxs)(p,{className:"text-2xl font-headline flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Channel Setup"}),(0,a.jsx)(h,{onClick:d,variant:"ghost",size:"icon","aria-label":"Refresh Videos",title:"Refresh Videos from API",disabled:!j||v||!u||0===t.length,children:(0,a.jsx)(N.A,{className:"h-5 w-5 text-primary"})})]})}),(0,a.jsxs)(g,{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"apiKeyInput",className:"block text-sm font-medium text-muted-foreground mb-1",children:"YouTube Data API Key"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(o,{id:"apiKeyInput",type:"password",placeholder:"Enter your API Key",value:T,onChange:e=>V(e.target.value),"aria-label":"YouTube API Key",disabled:!j}),(0,a.jsxs)(h,{onClick:()=>{b(T),(0,l.oR)({title:"API Key Updated",description:"Your YouTube API Key has been saved."})},"aria-label":"Save API Key",disabled:!j||!T.trim(),children:[(0,a.jsx)(C.A,{className:"mr-2 h-5 w-5"})," Save Key"]})]}),(0,a.jsxs)(x,{className:"text-xs mt-1",children:["Your API key is stored locally in your browser. ",(0,a.jsx)("a",{href:"https://developers.google.com/youtube/v3/getting-started",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"How to get an API key?"}),(0,a.jsx)("br",{}),(0,a.jsx)("strong",{children:"Important:"})," Restrict your API key in Google Cloud Console (HTTP referrers & API restrictions)."]})]}),(0,a.jsxs)("form",{onSubmit:P,className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"channelIdInput",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Add YouTube Channel"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(o,{id:"channelIdInput",type:"text",placeholder:"Enter Channel ID (e.g., UC...)",value:w,onChange:e=>I(e.target.value),disabled:!j||S||!u,"aria-label":"New Channel ID"}),(0,a.jsxs)(h,{type:"submit",disabled:!j||S||!u||!w.trim(),"aria-label":"Add Channel",children:[(0,a.jsx)(A.A,{className:"mr-2 h-5 w-5"})," ",S?"Adding...":"Add"]})]}),j&&!u&&(0,a.jsx)("p",{className:"text-xs text-destructive",children:"API Key is required to add channels."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(Y,{channels:t,onRemoveChannel:n,onReorderChannels:i,open:D,onOpenChange:E,isClientMounted:j}),(0,a.jsxs)(h,{variant:"outline",onClick:c,disabled:!j||v,className:"w-full","aria-label":"Clear Video Cache",children:[(0,a.jsx)(k.A,{className:"mr-2 h-5 w-5"})," Clear Video Cache"]})]})]})]})}var H=r(6766);let q=(0,c.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function B(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)(q({variant:r}),t),...s})}var G=r(4371),X=r(7451),Z=r(8328),Q=r(5263),$=r(7607),ee=r(4583),et=r(1737),er=r(1840),ea=r(9677);function es(e){let{video:t,onMarkAsWatched:r,isWatched:n,onToggleWatchLater:l,isWatchLater:o,onHideOnMobile:d,isMobile:c}=e,[u,x]=(0,s.useState)(!n),[v,y]=(0,s.useState)(""),j=String(t.title||"Untitled Video");return((0,s.useEffect)(()=>{try{y((0,ea.m)(new Date(t.publishedDate),{addSuffix:!0}))}catch(e){console.error("Error formatting date:",e,t.publishedDate),y("Invalid date")}},[t.publishedDate]),!u&&(n||c))?null:(0,a.jsxs)(m,{className:(0,i.cn)("flex flex-col overflow-hidden shadow-lg hover:shadow-primary/50 transition-all duration-300 ease-in-out transform hover:-translate-y-1",u?"opacity-100 scale-100":"opacity-0 scale-95","bg-card border-border relative"),style:{transitionProperty:"opacity, transform, box-shadow"},children:[c&&(0,a.jsx)(h,{variant:"ghost",size:"icon",className:"absolute top-1 right-1 z-10 h-7 w-7 bg-black/50 hover:bg-black/70 text-white hover:text-red-400",onClick:e=>{e.stopPropagation(),e.preventDefault(),x(!1),setTimeout(()=>{d(t.id,j)},300)},"aria-label":"Remove from view on mobile",title:"Remove from view on mobile",children:(0,a.jsx)(G.A,{className:"h-5 w-5"})}),(0,a.jsx)(f,{className:"p-0 relative",children:(0,a.jsx)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer","aria-label":"Watch ".concat(j," on YouTube"),children:(0,a.jsx)(H.default,{src:t.thumbnailUrl||"https://placehold.co/480x360.png?text=".concat(encodeURIComponent(j)),alt:"Thumbnail for ".concat(j),width:480,height:270,className:"w-full h-auto object-cover aspect-video","data-ai-hint":"video thumbnail"})})}),(0,a.jsxs)(g,{className:"p-4 flex-grow",children:[(0,a.jsx)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary",children:(0,a.jsx)(p,{className:"text-lg font-headline mb-2 leading-tight line-clamp-2 text-card-foreground",children:j})}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground mb-1",children:[(0,a.jsx)(X.A,{className:"h-4 w-4 mr-1.5 text-red-600"}),(0,a.jsx)("p",{className:"line-clamp-1",title:t.channelName,children:t.channelName})]}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground mb-3 space-x-3",children:[(0,a.jsxs)("div",{className:"flex items-center",title:"Published date",children:[(0,a.jsx)(Z.A,{className:"h-3.5 w-3.5 mr-1"}),(0,a.jsx)("span",{children:v||"Loading time..."})]}),(0,a.jsxs)("div",{className:"flex items-center",title:"Views",children:[(0,a.jsx)(Q.A,{className:"h-3.5 w-3.5 mr-1"}),(0,a.jsxs)("span",{children:[t.views.toLocaleString()," views"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground mb-1",title:"Duration",children:[(0,a.jsx)("span",{className:"mr-1",children:"⏱️"})," ",(0,a.jsxs)("span",{children:[Math.floor(t.durationSeconds/60),"m ",t.durationSeconds%60,"s"]})]}),(0,a.jsxs)(B,{variant:"secondary",className:"font-mono text-xs mt-2",title:"Calculated Rating: ".concat(t.rating.toFixed(4)),children:["Rating: ",t.rating.toFixed(2)]})]}),(0,a.jsxs)(b,{className:"p-4 pt-0 grid grid-cols-2 gap-2 items-center",children:[(0,a.jsxs)(h,{onClick:()=>{x(!1),setTimeout(()=>{r(t.id)},300)},variant:"outline",size:"sm",className:"w-full",children:[(0,a.jsx)($.A,{className:"mr-2 h-4 w-4"})," Watched"]}),(0,a.jsxs)(h,{onClick:()=>{l(t.id,j)},variant:o?"secondary":"outline",size:"sm",className:"w-full",children:[o?(0,a.jsx)(ee.A,{className:"mr-2 h-4 w-4"}):(0,a.jsx)(et.A,{className:"mr-2 h-4 w-4"}),o?"Unlist":"Later"]}),(0,a.jsx)(h,{asChild:!0,variant:"default",size:"sm",className:"col-span-2 w-full",children:(0,a.jsxs)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",children:["Watch on ",(0,a.jsx)(X.A,{className:"ml-2 h-4 w-4"}),(0,a.jsx)(er.A,{className:"ml-1 h-3 w-3"})]})})]})]})}var en=r(462),el=r(621),ei=r(1920),eo=r(475),ed=r(1133),ec=r(1199),eu=r(4910),eh=r(7648),em=r(3587);let ef=(0,c.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ep=s.forwardRef((e,t)=>{let{className:r,variant:s,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(ef({variant:s}),r),...n})});ep.displayName="Alert";let ex=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})});ex.displayName="AlertTitle";let eg=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",r),...s})});eg.displayName="AlertDescription";var eb=r(764),ev=r(9556),ey=r(7381),ej=r(518);let ew=eb.bL;eb.YJ;let eN=eb.WT,eC=s.forwardRef((e,t)=>{let{className:r,children:s,...n}=e;return(0,a.jsxs)(eb.l9,{ref:t,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...n,children:[s,(0,a.jsx)(eb.In,{asChild:!0,children:(0,a.jsx)(ev.A,{className:"h-4 w-4 opacity-50"})})]})});eC.displayName=eb.l9.displayName;let eA=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(eb.PP,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(ey.A,{className:"h-4 w-4"})})});eA.displayName=eb.PP.displayName;let ek=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(eb.wn,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(ev.A,{className:"h-4 w-4"})})});ek.displayName=eb.wn.displayName;let eI=s.forwardRef((e,t)=>{let{className:r,children:s,position:n="popper",...l}=e;return(0,a.jsx)(eb.ZL,{children:(0,a.jsxs)(eb.UC,{ref:t,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n,...l,children:[(0,a.jsx)(eA,{}),(0,a.jsx)(eb.LM,{className:(0,i.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(ek,{})]})})});eI.displayName=eb.UC.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(eb.JU,{ref:t,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})}).displayName=eb.JU.displayName;let eS=s.forwardRef((e,t)=>{let{className:r,children:s,...n}=e;return(0,a.jsxs)(eb.q7,{ref:t,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(eb.VF,{children:(0,a.jsx)(ej.A,{className:"h-4 w-4"})})}),(0,a.jsx)(eb.p4,{children:s})]})});eS.displayName=eb.q7.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(eb.wv,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",r),...s})}).displayName=eb.wv.displayName;let eR=[{value:"rating",label:"Rating",icon:en.A},{value:"views",label:"Views",icon:el.A},{value:"publishedDate",label:"Date",icon:ei.A},{value:"title",label:"Title",icon:eo.A}],eT=[{value:"all",label:"All Durations"},{value:"short",label:"< 10 min"},{value:"medium",label:"10-30 min"},{value:"long",label:"> 30 min"}],eV=[{value:"all",label:"All Videos"},{value:"watchLaterOnly",label:"Watch Later Only"},{value:"notWatchLater",label:"Not Watch Later"}];function eD(e){let{videos:t,onMarkAsWatched:r,watchedVideoIds:s,isLoading:n,error:l,hasChannels:i,apiKeyIsSet:o,sortOption:d,onSortChange:c,durationFilter:u,onDurationFilterChange:m,watchLaterFilter:f,onWatchLaterFilterChange:p,stats:x,onToggleWatchLater:g,watchLaterVideoIds:b,onHideOnMobile:v,isMobile:y,isClientMounted:j}=e;return!j||n?(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-6",children:Array.from({length:8}).map((e,t)=>(0,a.jsxs)("div",{className:"bg-card p-4 rounded-lg shadow-lg animate-pulse",children:[(0,a.jsx)("div",{className:"aspect-video bg-secondary rounded mb-4"}),(0,a.jsx)("div",{className:"h-4 bg-secondary rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-secondary rounded w-1/2 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-secondary rounded w-1/4"})]},t))}):l?(0,a.jsxs)(ep,{variant:"destructive",className:"m-6",children:[(0,a.jsx)(ed.A,{className:"h-4 w-4"}),(0,a.jsx)(ex,{children:"Error Fetching Videos"}),(0,a.jsx)(eg,{className:"whitespace-pre-line",children:l})]}):!o&&i?null:!i&&o?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[(0,a.jsx)(X.A,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-headline mb-2",children:"No Channels Added"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Add some YouTube channels using their Channel ID to see videos here."})]}):(0,a.jsxs)(W,{className:"h-full",children:[(0,a.jsxs)("div",{className:"p-4 md:p-6 space-y-4 sticky top-0 bg-background z-10 border-b border-border",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 items-center",children:[(0,a.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[(0,a.jsxs)(ew,{value:d.property,onValueChange:e=>{c({...d,property:e})},children:[(0,a.jsx)(eC,{className:"w-full sm:w-[150px] text-sm","aria-label":"Sort by",children:(0,a.jsx)(eN,{placeholder:"Sort by..."})}),(0,a.jsx)(eI,{children:eR.map(e=>(0,a.jsx)(eS,{value:e.value,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(e.icon,{className:"h-4 w-4 text-muted-foreground"}),e.label]})},e.value))})]}),(0,a.jsx)(h,{variant:"outline",size:"icon",onClick:()=>{c({...d,direction:"asc"===d.direction?"desc":"asc"})},"aria-label":"Toggle sort direction",children:"asc"===d.direction?(0,a.jsx)(ec.A,{className:"h-4 w-4"}):(0,a.jsx)(eu.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)(ew,{value:u,onValueChange:e=>m(e),children:[(0,a.jsxs)(eC,{className:"w-full sm:w-[160px] text-sm","aria-label":"Filter by duration",children:[(0,a.jsx)(eh.A,{className:"h-4 w-4 mr-1 text-muted-foreground inline-block"}),(0,a.jsx)(eN,{placeholder:"Duration..."})]}),(0,a.jsx)(eI,{children:eT.map(e=>(0,a.jsx)(eS,{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)(ew,{value:f,onValueChange:e=>p(e),children:[(0,a.jsxs)(eC,{className:"w-full sm:w-[180px] text-sm","aria-label":"Filter by watch later status",children:[(0,a.jsx)(em.A,{className:"h-4 w-4 mr-1 text-muted-foreground inline-block"}),(0,a.jsx)(eN,{placeholder:"Watch Later..."})]}),(0,a.jsx)(eI,{children:eV.map(e=>(0,a.jsx)(eS,{value:e.value,children:e.label},e.value))})]})]}),o&&i&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground flex flex-wrap gap-x-4 gap-y-1",children:[(0,a.jsxs)("span",{children:["Videos Displayed: ",x.totalUnwatched]}),x.totalUnwatched>0&&(0,a.jsxs)("span",{children:["Avg. Rating: ",x.averageRating]})]})]}),0===t.length&&i&&o&&!n&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 p-6 text-center",children:[(0,a.jsx)(ed.A,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-headline mb-2",children:"All Caught Up or No Matches!"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No videos match your current filters, or all have been watched/hidden."})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-6 gap-y-8 p-6",children:t.map(e=>(0,a.jsx)(es,{video:e,onMarkAsWatched:r,isWatched:s.includes(e.id),onToggleWatchLater:g,isWatchLater:b.includes(e.id),onHideOnMobile:v,isMobile:y},"".concat(e.channelId,"-").concat(e.id)))})]})}var eE=r(7489);let eP=s.forwardRef((e,t)=>{let{className:r,orientation:s="horizontal",decorative:n=!0,...l}=e;return(0,a.jsx)(eE.b,{ref:t,decorative:n,orientation:s,className:(0,i.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",r),...l})});eP.displayName=eE.b.displayName;var eM=r(594);function eL(e){let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("animate-pulse rounded-md bg-muted",t),...r})}var eO=r(1949);class eF extends s.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({errorInfo:t})}render(){if(this.state.hasError){var e;return this.props.fallback?this.props.fallback:(0,a.jsxs)("div",{className:"p-4 m-4 border border-destructive bg-destructive/10 text-destructive-foreground rounded-md flex flex-col items-center justify-center min-h-[200px]",children:[(0,a.jsx)(eO.A,{className:"w-12 h-12 text-destructive mb-4"}),(0,a.jsx)("h2",{className:"font-bold text-xl mb-2",children:"Oops! Something Went Wrong"}),(0,a.jsx)("p",{className:"text-sm mb-1",children:"We encountered an error trying to display this part of the page."}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-3",children:"Try refreshing, or check the console for more details."}),this.state.error&&(0,a.jsxs)("details",{className:"w-full max-w-md text-left bg-background/50 p-2 rounded border border-destructive/50",children:[(0,a.jsx)("summary",{className:"cursor-pointer text-xs font-medium",children:"Error Details"}),(0,a.jsxs)("pre",{className:"mt-2 text-xs whitespace-pre-wrap overflow-auto max-h-48",children:[this.state.error.message,(null==(e=this.state.errorInfo)?void 0:e.componentStack)&&"\n\nComponent Stack:\n".concat(this.state.errorInfo.componentStack),this.state.error.stack&&"\n\nFull Stack:\n".concat(this.state.error.stack)]})]}),(0,a.jsx)(h,{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"mt-4",variant:"outline",children:"Try to reload this section"})]})}return this.props.children}constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}}function eW(){let{channels:e,addChannel:t,removeChannel:r,reorderChannels:i}=function(){let[e,t]=n("youtubeChannels",[]);return{channels:e,addChannel:r=>e.find(e=>e.id===r.id)?((0,l.oR)({title:"Channel exists",description:"".concat(r.name," is already in your list."),variant:"default"}),!1):(t(e=>[...e,r]),!0),removeChannel:e=>{t(t=>t.filter(t=>t.id!==e)),(0,l.oR)({title:"Channel Removed",description:"The channel has been removed from your list."})},reorderChannels:(e,r)=>{t(t=>{let a=Array.from(t),[s]=a.splice(e,1);return a.splice(r,0,s),a})},setChannels:t}}(),{watchedVideoIds:o,addWatchedVideo:d,isVideoWatched:c}=function(){let[e,t]=n("watchedVideoIds",[]);return{watchedVideoIds:e,addWatchedVideo:r=>{e.includes(r)||t(e=>[...e,r])},isVideoWatched:t=>e.includes(t)}}(),{watchLaterVideoIds:u,toggleWatchLater:h,isVideoWatchLater:x}=function(){let[e,t]=n("watchLaterVideoIds",[]);return{watchLaterVideoIds:e,toggleWatchLater:(e,r)=>{t(t=>t.includes(e)?((0,l.oR)({title:"Removed from Watch Later",description:'"'.concat(r,'" removed.')}),t.filter(t=>t!==e)):((0,l.oR)({title:"Added to Watch Later",description:'"'.concat(r,'" added.')}),[...t,e]))},isVideoWatchLater:t=>e.includes(t)}}(),{hiddenOnMobileVideoIds:b,addHiddenOnMobileVideo:v,isVideoHiddenOnMobile:y}=function(){let[e,t]=n("hiddenOnMobileVideoIds",[]);return{hiddenOnMobileVideoIds:e,addHiddenOnMobileVideo:(r,a)=>{e.includes(r)||(t(e=>[...e,r]),(0,l.oR)({title:"Video Hidden on Mobile",description:'"'.concat(a,'" will be hidden on this mobile device.')}))},isVideoHiddenOnMobile:t=>e.includes(t),clearHiddenOnMobileVideos:()=>{t([]),(0,l.oR)({title:"Mobile Hidden Videos Cleared",description:"All videos previously hidden on mobile will now be shown."})}}}(),N=function(){let[e,t]=s.useState(void 0);return s.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),r=()=>{t(window.innerWidth<768)};return e.addEventListener("change",r),t(window.innerWidth<768),()=>e.removeEventListener("change",r)},[]),!!e}(),[C,A]=n("allVideosCache",[]),[k,I]=n("shuffledVideoIds",[]),[S,R]=(0,s.useState)(!1),[T,V]=(0,s.useState)(null),[D,E]=n("youtubeApiKey",""),[P,M]=(0,s.useState)({property:"rating",direction:"desc"}),[L,O]=(0,s.useState)("all"),[F,W]=(0,s.useState)("all"),[K,U]=(0,s.useState)(!1),z=(0,s.useRef)(),_=(0,s.useRef)(!1),Y=(0,s.useRef)(!1);(0,s.useEffect)(()=>{U(!0),void 0===z.current&&(z.current=JSON.stringify(e.map(e=>e.id).sort()))},[]);let H=(0,s.useCallback)(async(e,t)=>{if(!t)throw Error("API Key is not set. Please configure it in the Channel Setup panel.");let r=await j(t,e.youtubeChannelId,20);return 0===r.length?[]:(await w(t,r)).map(e=>{var t,r;if(!e||!e.id||!e.snippet||!e.contentDetails||!e.statistics)return console.warn("Skipping video with incomplete details:",e),null;let a=function(e){let t;if(!e||!e.startsWith("PT"))return 0;let r=e.substring(2),a=0,s=/(\d+)([HMS])/g;for(;null!==(t=s.exec(r));){let e=parseInt(t[1],10),r=t[2];"H"===r?a+=3600*e:"M"===r?a+=60*e:"S"===r&&(a+=e)}return a}(e.contentDetails.duration),s=parseInt(e.statistics.viewCount,10)||0;return{id:e.id,title:e.snippet.title,link:"https://www.youtube.com/watch?v=".concat(e.id),thumbnailUrl:(null==(t=e.snippet.thumbnails.medium)?void 0:t.url)||(null==(r=e.snippet.thumbnails.standard)?void 0:r.url)||"https://placehold.co/480x360.png?text=".concat(encodeURIComponent(e.snippet.title)),publishedDate:e.snippet.publishedAt,views:s,channelName:e.snippet.channelTitle,channelId:e.snippet.channelId,rating:s,durationSeconds:a}}).filter(e=>null!==e)},[]),q=(0,s.useCallback)((e,t,r)=>{if(!e||0===e.length||!r||0===r.length)return void I([]);let a=new Map;for(let t of e)a.has(t.channelId)||a.set(t.channelId,[]),a.get(t.channelId).push(t);a.forEach(e=>{e.sort((e,r)=>{let a=e[t.property],s=r[t.property],n=0;return"number"==typeof a&&"number"==typeof s?n=a-s:"string"==typeof a&&"string"==typeof s?n=a.localeCompare(s):"publishedDate"===t.property&&(n=new Date(a).getTime()-new Date(s).getTime()),"asc"===t.direction?n:-n})});let s=[],n=r.map(e=>e.youtubeChannelId),l=new Map(n.map(e=>[e,0])),i=!0;for(;i;)for(let e of(i=!1,n)){let t=a.get(e),r=l.get(e)||0;t&&r<t.length&&(s.push(t[r]),l.set(e,r+1),i=!0)}I((function(e){let t=[...e];for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t})(s).map(e=>e.id))},[I]),B=(0,s.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D;if(K){if(!r){V("YouTube API Key is not set. Please add it in the Channel Setup panel to fetch videos."),R(!1);return}if(0===e.length){A([]),I([]),V(null),R(!1);return}if(R(!0),V(null),t||0===C.length)try{let t=e.map(e=>H(e,r)),a=await Promise.allSettled(t),s=[],n=!1;a.forEach((t,r)=>{if("fulfilled"===t.status)s.push(...t.value);else{console.error("Error fetching videos for ".concat(e[r].name,":"),t.reason);let a=t.reason instanceof Error?t.reason.message:String(t.reason);V(t=>t?"".concat(t,"\nCould not load videos for ").concat(e[r].name,": ").concat(a):"Could not load videos for ".concat(e[r].name,": ").concat(a)),n=!0}}),0===s.length&&n&&e.length>0||0===s.length&&e.length>0&&!n&&(0,l.oR)({title:"No Videos Found",description:"The selected channels might not have any videos, or all videos are shorter than 3 minutes."});let i=Array.from(new Map(s.map(e=>[e.id,e])).values()).filter(e=>e.durationSeconds>180);A(i),Y.current=!1}catch(e){console.error("Error aggregating videos:",e),V(e instanceof Error?e.message:"An unknown error occurred during video aggregation."),A([]),I([])}finally{R(!1)}else{R(!1);let t=JSON.stringify(e.map(e=>e.id).sort());(z.current!==t||C.length>0&&0===k.length&&!Y.current)&&(q(C.filter(t=>e.some(e=>e.youtubeChannelId===t.channelId)),P,e),Y.current=!0,z.current=t)}}},[D,e,H,K,A,C.length,I,q,P,k.length]);(0,s.useEffect)(()=>{K&&!_.current&&(D&&e.length>0?0===C.length?B(!1):0!==k.length||Y.current||(q(C.filter(t=>e.some(e=>e.youtubeChannelId===t.channelId)),P,e),Y.current=!0):!D&&e.length>0?V("YouTube API Key is not set. Please add it to fetch videos."):0===e.length&&(A([]),I([]),V(null)),_.current=!0)},[K,D,e,C,k.length,B,A,I,q,P]),(0,s.useEffect)(()=>{if(!K||!C.length||!e.length||!Y.current){0===e.length&&(C.length>0||k.length>0)&&I([]);return}let t=JSON.stringify(e.map(e=>e.id).sort());z.current!==t&&(q(C.filter(t=>e.some(e=>e.youtubeChannelId===t.channelId)),P,e),z.current=t)},[K,C,e,P,q,I,k.length]);let G=(0,s.useMemo)(()=>{if(!K||!C||0===C.length||!k||0===k.length)return D&&e.length,[];let t=new Map(C.map(e=>[e.id,e])),r=k.map(e=>t.get(e)).filter(e=>void 0!==e);return r=(r=r.filter(t=>e.some(e=>e.youtubeChannelId===t.channelId))).filter(e=>!c(e.id)),N&&(r=r.filter(e=>!y(e.id))),"all"!==L&&(r=r.filter(e=>{let t=e.durationSeconds;return"short"===L?t<600:"medium"===L?t>=600&&t<=1800:"long"!==L||t>1800})),"watchLaterOnly"===F?r=r.filter(e=>x(e.id)):"notWatchLater"===F&&(r=r.filter(e=>!x(e.id))),r.sort((e,t)=>{let r=e[P.property],a=t[P.property],s=0;return"number"==typeof r&&"number"==typeof a?s=r-a:"string"==typeof r&&"string"==typeof a?s=r.localeCompare(a):"publishedDate"===P.property&&(s=new Date(r).getTime()-new Date(a).getTime()),"asc"===P.direction?s:-s}),r},[K,C,k,e,D,c,N,y,L,F,x,P]),Z=(0,s.useMemo)(()=>{if(!K)return{totalUnwatched:0,averageRating:"0.00"};let e=G.length,t=e>0?G.reduce((e,t)=>e+t.rating,0)/e:0;return{totalUnwatched:e,averageRating:t.toFixed(2)}},[G,K]),Q=()=>{if(!D)return void(0,l.oR)({title:"API Key Required",description:"Please set your YouTube API Key before refreshing.",variant:"destructive"});(0,l.oR)({title:"Refreshing Videos...",description:"Fetching the latest popular videos from all channels."}),_.current=!1,Y.current=!1,B(!0)},$=()=>{A([]),I([]),(0,l.oR)({title:"Video Cache Cleared",description:"Local video cache has been emptied."}),_.current=!1,Y.current=!1,D&&e.length>0?B(!0):!D&&e.length>0?V("API Key is not set. Please add it to fetch videos."):V(null)},ee=t=>{E(t),_.current=!1,Y.current=!1,t&&e.length>0?B(!0,t):!t&&e.length>0?V("API Key removed. Videos are shown from cache. Set API Key to fetch new videos."):t&&0===e.length&&V(null)};return K?K&&!D&&0===e.length?(0,a.jsxs)("div",{className:"flex flex-col md:flex-row min-h-screen bg-background text-foreground",children:[(0,a.jsx)("header",{className:"md:hidden p-4 border-b border-border sticky top-0 bg-background z-10",children:(0,a.jsx)("h1",{className:"text-3xl font-headline text-primary",children:"Science Video Viewer"})}),(0,a.jsxs)("aside",{className:"w-full md:w-[380px] lg:w-[420px] p-4 md:p-6 border-r border-border md:min-h-screen md:sticky md:top-0 shrink-0",children:[(0,a.jsxs)("div",{className:"hidden md:block mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-headline text-primary",children:"Science Video Viewer"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Discover and rank science content from YouTube."})]}),(0,a.jsx)(J,{channels:e,onAddChannel:r=>{let a=t(r);return a&&D?(_.current=!1,Y.current=!1,B(!0)):a&&(z.current=JSON.stringify([...e,r].map(e=>e.id).sort()),Y.current=!1),a},onRemoveChannel:e=>{r(e),_.current=!1,Y.current=!1},onReorderChannels:(e,t)=>{i(e,t),_.current=!1,Y.current=!1},onRefreshVideos:Q,onClearCache:$,apiKey:D,onSetApiKey:ee,isLoadingVideos:S,isClientMounted:K})]}),(0,a.jsx)(eP,{orientation:"vertical",className:"hidden md:block h-auto sticky top-0"}),(0,a.jsxs)("main",{className:"flex-1 md:overflow-y-auto flex flex-col items-center justify-center p-6 text-center",children:[(0,a.jsx)(X.A,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-headline mb-2",children:"Welcome to Science Video Viewer!"}),(0,a.jsx)("p",{className:"text-muted-foreground max-w-md",children:"To get started, please add your YouTube Data API Key and then some of your favorite science YouTube channels using the panel on the left."})]})]}):(0,a.jsx)(eF,{fallback:(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-background text-destructive p-4 text-center",children:"An unexpected error occurred. Please refresh the page or check the console for details."}),children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row min-h-screen bg-background text-foreground",children:[(0,a.jsx)("header",{className:"md:hidden p-4 border-b border-border sticky top-0 bg-background z-10",children:(0,a.jsx)("h1",{className:"text-3xl font-headline text-primary",children:"Science Video Viewer"})}),(0,a.jsxs)("aside",{className:"w-full md:w-[380px] lg:w-[420px] p-4 md:p-6 border-r border-border md:min-h-screen md:sticky md:top-0 shrink-0",children:[(0,a.jsxs)("div",{className:"hidden md:block mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-headline text-primary",children:"Science Video Viewer"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Discover and rank science content from YouTube."})]}),(0,a.jsx)(J,{channels:e,onAddChannel:r=>{let a=t(r);return a&&D?(_.current=!1,Y.current=!1,B(!0)):a&&(z.current=JSON.stringify([...e,r].map(e=>e.id).sort()),Y.current=!1),a},onRemoveChannel:e=>{r(e),_.current=!1,Y.current=!1},onReorderChannels:(e,t)=>{i(e,t),_.current=!1,Y.current=!1},onRefreshVideos:Q,onClearCache:$,apiKey:D,onSetApiKey:ee,isLoadingVideos:S,isClientMounted:K})]}),(0,a.jsx)(eP,{orientation:"vertical",className:"hidden md:block h-auto sticky top-0"}),(0,a.jsxs)("main",{className:"flex-1 md:overflow-y-auto",children:[K&&!D&&e.length>0&&(0,a.jsxs)(ep,{variant:"default",className:"m-6 bg-primary/10 border-primary/30",children:[(0,a.jsx)(eM.A,{className:"h-4 w-4 text-primary"}),(0,a.jsx)(ex,{className:"text-primary",children:"API Key Needed"}),(0,a.jsx)(eg,{children:'Please set your YouTube Data API Key in the "Channel Setup" panel on the left to fetch videos. Videos shown are from local cache.'})]}),(0,a.jsx)(eD,{videos:G,onMarkAsWatched:d,watchedVideoIds:o,isLoading:S&&!!D,error:T,hasChannels:e.length>0,apiKeyIsSet:!!D,sortOption:P,onSortChange:M,durationFilter:L,onDurationFilterChange:O,watchLaterFilter:F,onWatchLaterFilterChange:W,stats:Z,onToggleWatchLater:h,watchLaterVideoIds:u,onHideOnMobile:v,isMobile:N,isClientMounted:K})]})]})}):(0,a.jsxs)("div",{className:"flex flex-col md:flex-row min-h-screen bg-background text-foreground",children:[(0,a.jsx)("header",{className:"md:hidden p-4 border-b border-border sticky top-0 bg-background z-10",children:(0,a.jsx)("h1",{className:"text-3xl font-headline text-primary",children:"Science Video Viewer"})}),(0,a.jsxs)("aside",{className:"w-full md:w-[380px] lg:w-[420px] p-4 md:p-6 border-r border-border md:min-h-screen md:sticky md:top-0 shrink-0",children:[(0,a.jsxs)("div",{className:"hidden md:block mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-headline text-primary",children:"Science Video Viewer"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Discover and rank science content from YouTube."})]}),(0,a.jsxs)(m,{className:"w-full shadow-xl",children:[(0,a.jsx)(f,{children:(0,a.jsx)(p,{children:"Channel Setup"})}),(0,a.jsxs)(g,{children:[(0,a.jsx)(eL,{className:"h-8 w-full mb-2"}),(0,a.jsx)(eL,{className:"h-8 w-full"})]})]})]}),(0,a.jsx)(eP,{orientation:"vertical",className:"hidden md:block h-auto sticky top-0"}),(0,a.jsx)("main",{className:"flex-1 md:overflow-y-auto",children:(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-6",children:Array.from({length:8}).map((e,t)=>(0,a.jsxs)("div",{className:"bg-card p-4 rounded-lg shadow-lg animate-pulse",children:[(0,a.jsx)(eL,{className:"aspect-video rounded mb-4"}),(0,a.jsx)(eL,{className:"h-4 w-3/4 mb-2"}),(0,a.jsx)(eL,{className:"h-3 w-1/2 mb-2"}),(0,a.jsx)(eL,{className:"h-3 w-1/4"})]},t))})})]})}},2751:(e,t,r)=>{Promise.resolve().then(r.bind(r,2598))},7481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>h,oR:()=>u});var a=r(2115);let s=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?l(r):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=i(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function h(){let[e,t]=a.useState(d);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(2596),s=r(9688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[774,870,441,684,358],()=>t(2751)),_N_E=e.O()}]);