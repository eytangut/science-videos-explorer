(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2751:(e,t,a)=>{Promise.resolve().then(a.bind(a,9073))},7481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>h,oR:()=>u});var s=a(2115);let r=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?l(a):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=i(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function h(){let[e,t]=s.useState(d);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9073:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eO});var s=a(5155),r=a(2115);let n=function(e,t){let a=(0,r.useCallback)(()=>{try{let a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(a){return console.warn('Error reading localStorage key "'.concat(e,'":'),a),t}},[t,e]),[s,n]=(0,r.useState)(a);(0,r.useEffect)(()=>{n(a())},[]);let l=(0,r.useCallback)(t=>{try{let a=t instanceof Function?t(s):t;window.localStorage.setItem(e,JSON.stringify(a)),n(a)}catch(t){console.warn('Error setting localStorage key "'.concat(e,'":'),t)}},[e,s]);return(0,r.useEffect)(()=>{let t=t=>{t.key===e&&null!==t.newValue&&n(JSON.parse(t.newValue))};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}},[e]),[s,l]};var l=a(7481),i=a(9434);let o=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});o.displayName="Input";var d=a(9708),c=a(2085);let u=(0,c.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:l=!1,...o}=e,c=l?d.DX:"button";return(0,s.jsx)(c,{className:(0,i.cn)(u({variant:r,size:n,className:a})),ref:t,...o})});h.displayName="Button";let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});m.displayName="Card";let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...r})});f.displayName="CardHeader";let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});p.displayName="CardTitle";let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});x.displayName="CardDescription";let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...r})});g.displayName="CardContent";let b=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...r})});b.displayName="CardFooter";let v="https://www.googleapis.com/youtube/v3";async function y(e,t){let a=t.startsWith("@")?t.substring(1):t.trim(),s="";s=a.startsWith("UC")&&a.length>20?"".concat(v,"/channels?part=snippet,contentDetails&id=").concat(a,"&key=").concat(e):"".concat(v,"/channels?part=snippet,contentDetails&forUsername=").concat(a,"&key=").concat(e);try{let e=await fetch(s);if(!e.ok){var r;let t=await e.json().catch(()=>({error:{message:"API request failed with status ".concat(e.status," and non-JSON response.")}}));throw console.error("Failed to fetch channel details for '".concat(a,"' using ").concat(s.split("?")[0],". Status: ").concat(e.status),t),Error((null==(r=t.error)?void 0:r.message)||"Failed to fetch channel details for '".concat(a,"': ").concat(e.statusText))}let t=await e.json();if(t.items&&t.items.length>0)return t.items[0];return console.warn("Channel not found for identifier: '".concat(a,"' using ").concat(s.split("?")[0],". API returned no items.")),null}catch(e){throw console.error("Exception during fetchChannelDetails for identifier '".concat(a,"':"),e),e}}async function w(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;try{var s,r;let n=await fetch("".concat(v,"/search?part=snippet&channelId=").concat(t,"&order=viewCount&type=video&maxResults=").concat(a,"&key=").concat(e));if(!n.ok){let e=await n.json().catch(()=>({error:{message:"API request failed with status ".concat(n.status," and non-JSON response.")}}));throw console.error("Error fetching popular videos from search:",e),Error((null==(r=e.error)?void 0:r.message)||"Failed to fetch popular videos: ".concat(n.statusText))}return(null==(s=(await n.json()).items)?void 0:s.map(e=>{var t;return null==(t=e.id)?void 0:t.videoId}).filter(e=>!!e))||[]}catch(e){throw console.error("Error in fetchChannelPopularVideoIdsFromSearch:",e),e}}async function j(e,t){if(0===t.length)return[];try{let s=await fetch("".concat(v,"/videos?part=snippet,contentDetails,statistics&id=").concat(t.join(","),"&key=").concat(e));if(!s.ok){var a;let e=await s.json();throw console.error("Error fetching video details:",e),Error((null==(a=e.error)?void 0:a.message)||"Failed to fetch video details: ".concat(s.statusText))}return(await s.json()).items||[]}catch(e){throw console.error("Error in fetchVideosDetails:",e),e}}var N=a(2720),C=a(3576),A=a(4301),k=a(7223),I=a(5452),S=a(5318);let R=I.bL,T=I.l9,V=I.ZL,D=I.bm,E=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(I.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});E.displayName=I.hJ.displayName;let P=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(V,{children:[(0,s.jsx)(E,{}),(0,s.jsxs)(I.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[r,(0,s.jsxs)(I.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(S.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});P.displayName=I.UC.displayName;let M=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};M.displayName="DialogHeader";let L=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};L.displayName="DialogFooter";let O=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(I.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});O.displayName=I.hE.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(I.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})}).displayName=I.VY.displayName;var F=a(7655);let K=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(F.bL,{ref:t,className:(0,i.cn)("relative overflow-hidden",a),...n,children:[(0,s.jsx)(F.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,s.jsx)(U,{}),(0,s.jsx)(F.OK,{})]})});K.displayName=F.bL.displayName;let U=r.forwardRef((e,t)=>{let{className:a,orientation:r="vertical",...n}=e;return(0,s.jsx)(F.VM,{ref:t,orientation:r,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...n,children:(0,s.jsx)(F.lr,{className:"relative flex-1 rounded-full bg-border"})})});U.displayName=F.VM.displayName;var W=a(8271),z=a(203),_=a(3926);function Y(e){let{channels:t,onRemoveChannel:a,onReorderChannels:r,open:n,onOpenChange:l,isClientMounted:i}=e,o=(e,a)=>{"up"===a&&e>0?r(e,e-1):"down"===a&&e<t.length-1&&r(e,e+1)};return(0,s.jsxs)(R,{open:n,onOpenChange:l,children:[(0,s.jsx)(T,{asChild:!0,children:(0,s.jsxs)(h,{variant:"outline",disabled:!i,children:[(0,s.jsx)(W.A,{className:"mr-2 h-5 w-5"})," Manage Added Channels"]})}),(0,s.jsxs)(P,{className:"sm:max-w-[525px]",children:[(0,s.jsx)(M,{children:(0,s.jsx)(O,{className:"text-2xl font-headline",children:"Manage Your Channels"})}),i?0===t.length?(0,s.jsx)("p",{className:"text-muted-foreground py-4",children:"No channels added yet. Add one using the panel."}):(0,s.jsx)(K,{className:"max-h-[60vh] pr-3 my-4",children:(0,s.jsx)("ul",{className:"space-y-3",children:t.map((e,r)=>(0,s.jsxs)("li",{className:"flex items-center justify-between p-3 bg-secondary/30 rounded-md shadow",children:[(0,s.jsx)("span",{className:"truncate font-medium flex-1 mr-2",title:e.name,children:e.name}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(h,{variant:"ghost",size:"icon",onClick:()=>o(r,"up"),disabled:0===r,"aria-label":"Move Up",children:(0,s.jsx)(z.A,{className:"h-4 w-4"})}),(0,s.jsx)(h,{variant:"ghost",size:"icon",onClick:()=>o(r,"down"),disabled:r===t.length-1,"aria-label":"Move Down",children:(0,s.jsx)(_.A,{className:"h-4 w-4"})}),(0,s.jsx)(h,{variant:"ghost",size:"icon",onClick:()=>a(e.id),"aria-label":"Remove Channel",children:(0,s.jsx)(k.A,{className:"h-4 w-4 text-destructive"})})]})]},e.id))})}):(0,s.jsx)("p",{className:"text-muted-foreground py-4",children:"Loading channel list..."}),(0,s.jsx)(L,{children:(0,s.jsx)(D,{asChild:!0,children:(0,s.jsx)(h,{type:"button",variant:"secondary",children:"Close"})})})]})]})}function H(e){let{channels:t,onAddChannel:a,onRemoveChannel:n,onReorderChannels:i,onRefreshVideos:d,onClearCache:c,apiKey:u,onSetApiKey:b,isLoadingVideos:v,isClientMounted:w}=e,[j,I]=(0,r.useState)(""),[S,R]=(0,r.useState)(!1),[T,V]=(0,r.useState)(u),[D,E]=(0,r.useState)(!1);(0,r.useEffect)(()=>{V(u)},[u]);let P=async e=>{if(e.preventDefault(),!u.trim())return void(0,l.oR)({title:"API Key Required",description:"Please enter your YouTube Data API Key first.",variant:"destructive"});if(!j.trim())return void(0,l.oR)({title:"Channel ID Required",description:"YouTube Channel ID cannot be empty.",variant:"destructive"});R(!0);try{let e=j.trim();e.includes("youtube.com/channel/")?e=e.split("youtube.com/channel/")[1].split("/")[0].split("?")[0]:e.includes("youtube.com/@")&&(e=e.split("youtube.com/@")[1].split("/")[0].split("?")[0],(0,l.oR)({title:"Using Handle",description:'Attempting to use "'.concat(e,'" as channel identifier. For best results, use the Channel ID (starts with UC).'),variant:"default"}));let t=await y(u,e);if(!t)throw Error("Could not find channel details for ID: ".concat(e,". Please ensure it's a valid YouTube Channel ID (e.g., UC...). Custom URLs or handles may require specific API lookups."));a({id:t.id,name:t.snippet.title||"Unnamed Channel",youtubeChannelId:t.id})&&((0,l.oR)({title:"Channel Added",description:"".concat(t.snippet.title," added successfully.")}),I(""))}catch(t){console.error("Failed to add channel:",t);let e=t instanceof Error?t.message:"An unknown error occurred.";(0,l.oR)({title:"Error Adding Channel",description:e,variant:"destructive"})}finally{R(!1)}};return(0,s.jsxs)(m,{className:"w-full shadow-xl",children:[(0,s.jsx)(f,{children:(0,s.jsxs)(p,{className:"text-2xl font-headline flex items-center justify-between",children:[(0,s.jsx)("span",{children:"Channel Setup"}),(0,s.jsx)(h,{onClick:d,variant:"ghost",size:"icon","aria-label":"Refresh Videos",title:"Refresh Videos from API",disabled:!w||v||!u||0===t.length,children:(0,s.jsx)(N.A,{className:"h-5 w-5 text-primary"})})]})}),(0,s.jsxs)(g,{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"apiKeyInput",className:"block text-sm font-medium text-muted-foreground mb-1",children:"YouTube Data API Key"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(o,{id:"apiKeyInput",type:"password",placeholder:"Enter your API Key",value:T,onChange:e=>V(e.target.value),"aria-label":"YouTube API Key",disabled:!w}),(0,s.jsxs)(h,{onClick:()=>{b(T),(0,l.oR)({title:"API Key Updated",description:"Your YouTube API Key has been saved."})},"aria-label":"Save API Key",disabled:!w||!T.trim(),children:[(0,s.jsx)(C.A,{className:"mr-2 h-5 w-5"})," Save Key"]})]}),(0,s.jsxs)(x,{className:"text-xs mt-1",children:["Your API key is stored locally in your browser. ",(0,s.jsx)("a",{href:"https://developers.google.com/youtube/v3/getting-started",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"How to get an API key?"}),(0,s.jsx)("br",{}),(0,s.jsx)("strong",{children:"Important:"})," Restrict your API key in Google Cloud Console (HTTP referrers & API restrictions)."]})]}),(0,s.jsxs)("form",{onSubmit:P,className:"space-y-2",children:[(0,s.jsx)("label",{htmlFor:"channelIdInput",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Add YouTube Channel"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(o,{id:"channelIdInput",type:"text",placeholder:"Enter Channel ID (e.g., UC...)",value:j,onChange:e=>I(e.target.value),disabled:!w||S||!u,"aria-label":"New Channel ID"}),(0,s.jsxs)(h,{type:"submit",disabled:!w||S||!u||!j.trim(),"aria-label":"Add Channel",children:[(0,s.jsx)(A.A,{className:"mr-2 h-5 w-5"})," ",S?"Adding...":"Add"]})]}),w&&!u&&(0,s.jsx)("p",{className:"text-xs text-destructive",children:"API Key is required to add channels."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(Y,{channels:t,onRemoveChannel:n,onReorderChannels:i,open:D,onOpenChange:E,isClientMounted:w}),(0,s.jsxs)(h,{variant:"outline",onClick:c,disabled:!w||v,className:"w-full","aria-label":"Clear Video Cache",children:[(0,s.jsx)(k.A,{className:"mr-2 h-5 w-5"})," Clear Video Cache"]})]})]})]})}var J=a(6766);let q=(0,c.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function G(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,i.cn)(q({variant:a}),t),...r})}var X=a(4371),Z=a(7451),B=a(8328),Q=a(5263),$=a(7607),ee=a(4583),et=a(1737),ea=a(1840),es=a(9677);function er(e){let{video:t,onMarkAsWatched:a,isWatched:n,onToggleWatchLater:l,isWatchLater:o,onHideOnMobile:d,isMobile:c}=e,[u,x]=(0,r.useState)(!n),[v,y]=(0,r.useState)(""),w=String(t.title||"Untitled Video");return((0,r.useEffect)(()=>{try{y((0,es.m)(new Date(t.publishedDate),{addSuffix:!0}))}catch(e){console.error("Error formatting date:",e,t.publishedDate),y("Invalid date")}},[t.publishedDate]),!u&&(n||c))?null:(0,s.jsxs)(m,{className:(0,i.cn)("flex flex-col overflow-hidden shadow-lg hover:shadow-primary/50 transition-all duration-300 ease-in-out transform hover:-translate-y-1",u?"opacity-100 scale-100":"opacity-0 scale-95","bg-card border-border relative"),style:{transitionProperty:"opacity, transform, box-shadow"},children:[c&&(0,s.jsx)(h,{variant:"ghost",size:"icon",className:"absolute top-1 right-1 z-10 h-7 w-7 bg-black/50 hover:bg-black/70 text-white hover:text-red-400",onClick:e=>{e.stopPropagation(),e.preventDefault(),x(!1),setTimeout(()=>{d(t.id,w)},300)},"aria-label":"Remove from view on mobile",title:"Remove from view on mobile",children:(0,s.jsx)(X.A,{className:"h-5 w-5"})}),(0,s.jsx)(f,{className:"p-0 relative",children:(0,s.jsx)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer","aria-label":"Watch ".concat(w," on YouTube"),children:(0,s.jsx)(J.default,{src:t.thumbnailUrl||"https://placehold.co/480x360.png?text=".concat(encodeURIComponent(w)),alt:"Thumbnail for ".concat(w),width:480,height:270,className:"w-full h-auto object-cover aspect-video","data-ai-hint":"video thumbnail"})})}),(0,s.jsxs)(g,{className:"p-4 flex-grow",children:[(0,s.jsx)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary",children:(0,s.jsx)(p,{className:"text-lg font-headline mb-2 leading-tight line-clamp-2 text-card-foreground",children:w})}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground mb-1",children:[(0,s.jsx)(Z.A,{className:"h-4 w-4 mr-1.5 text-red-600"}),(0,s.jsx)("p",{className:"line-clamp-1",title:t.channelName,children:t.channelName})]}),(0,s.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground mb-3 space-x-3",children:[(0,s.jsxs)("div",{className:"flex items-center",title:"Published date",children:[(0,s.jsx)(B.A,{className:"h-3.5 w-3.5 mr-1"}),(0,s.jsx)("span",{children:v||"Loading time..."})]}),(0,s.jsxs)("div",{className:"flex items-center",title:"Views",children:[(0,s.jsx)(Q.A,{className:"h-3.5 w-3.5 mr-1"}),(0,s.jsxs)("span",{children:[t.views.toLocaleString()," views"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground mb-1",title:"Duration",children:[(0,s.jsx)("span",{className:"mr-1",children:"⏱️"})," ",(0,s.jsxs)("span",{children:[Math.floor(t.durationSeconds/60),"m ",t.durationSeconds%60,"s"]})]}),(0,s.jsxs)(G,{variant:"secondary",className:"font-mono text-xs mt-2",title:"Calculated Rating: ".concat(t.rating.toFixed(4)),children:["Rating: ",t.rating.toFixed(2)]})]}),(0,s.jsxs)(b,{className:"p-4 pt-0 grid grid-cols-2 gap-2 items-center",children:[(0,s.jsxs)(h,{onClick:()=>{x(!1),setTimeout(()=>{a(t.id)},300)},variant:"outline",size:"sm",className:"w-full",children:[(0,s.jsx)($.A,{className:"mr-2 h-4 w-4"})," Watched"]}),(0,s.jsxs)(h,{onClick:()=>{l(t.id,w)},variant:o?"secondary":"outline",size:"sm",className:"w-full",children:[o?(0,s.jsx)(ee.A,{className:"mr-2 h-4 w-4"}):(0,s.jsx)(et.A,{className:"mr-2 h-4 w-4"}),o?"Unlist":"Later"]}),(0,s.jsx)(h,{asChild:!0,variant:"default",size:"sm",className:"col-span-2 w-full",children:(0,s.jsxs)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",children:["Watch on ",(0,s.jsx)(Z.A,{className:"ml-2 h-4 w-4"}),(0,s.jsx)(ea.A,{className:"ml-1 h-3 w-3"})]})})]})]})}var en=a(462),el=a(621),ei=a(1920),eo=a(475),ed=a(1133),ec=a(1199),eu=a(4910),eh=a(7648),em=a(3587);let ef=(0,c.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ep=r.forwardRef((e,t)=>{let{className:a,variant:r,...n}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(ef({variant:r}),a),...n})});ep.displayName="Alert";let ex=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})});ex.displayName="AlertTitle";let eg=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",a),...r})});eg.displayName="AlertDescription";var eb=a(764),ev=a(9556),ey=a(7381),ew=a(518);let ej=eb.bL;eb.YJ;let eN=eb.WT,eC=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(eb.l9,{ref:t,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...n,children:[r,(0,s.jsx)(eb.In,{asChild:!0,children:(0,s.jsx)(ev.A,{className:"h-4 w-4 opacity-50"})})]})});eC.displayName=eb.l9.displayName;let eA=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eb.PP,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(ey.A,{className:"h-4 w-4"})})});eA.displayName=eb.PP.displayName;let ek=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eb.wn,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(ev.A,{className:"h-4 w-4"})})});ek.displayName=eb.wn.displayName;let eI=r.forwardRef((e,t)=>{let{className:a,children:r,position:n="popper",...l}=e;return(0,s.jsx)(eb.ZL,{children:(0,s.jsxs)(eb.UC,{ref:t,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...l,children:[(0,s.jsx)(eA,{}),(0,s.jsx)(eb.LM,{className:(0,i.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(ek,{})]})})});eI.displayName=eb.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eb.JU,{ref:t,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=eb.JU.displayName;let eS=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(eb.q7,{ref:t,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(eb.VF,{children:(0,s.jsx)(ew.A,{className:"h-4 w-4"})})}),(0,s.jsx)(eb.p4,{children:r})]})});eS.displayName=eb.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(eb.wv,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=eb.wv.displayName;let eR=[{value:"rating",label:"Rating",icon:en.A},{value:"views",label:"Views",icon:el.A},{value:"publishedDate",label:"Date",icon:ei.A},{value:"title",label:"Title",icon:eo.A}],eT=[{value:"all",label:"All Durations"},{value:"short",label:"< 10 min"},{value:"medium",label:"10-30 min"},{value:"long",label:"> 30 min"}],eV=[{value:"all",label:"All Videos"},{value:"watchLaterOnly",label:"Watch Later Only"},{value:"notWatchLater",label:"Not Watch Later"}];function eD(e){let{videos:t,onMarkAsWatched:a,watchedVideoIds:r,isLoading:n,error:l,hasChannels:i,apiKeyIsSet:o,sortOption:d,onSortChange:c,durationFilter:u,onDurationFilterChange:m,watchLaterFilter:f,onWatchLaterFilterChange:p,stats:x,onToggleWatchLater:g,watchLaterVideoIds:b,onHideOnMobile:v,isMobile:y,isClientMounted:w}=e;return!w||n?(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-6",children:Array.from({length:8}).map((e,t)=>(0,s.jsxs)("div",{className:"bg-card p-4 rounded-lg shadow-lg animate-pulse",children:[(0,s.jsx)("div",{className:"aspect-video bg-secondary rounded mb-4"}),(0,s.jsx)("div",{className:"h-4 bg-secondary rounded w-3/4 mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-secondary rounded w-1/2 mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-secondary rounded w-1/4"})]},t))}):l?(0,s.jsxs)(ep,{variant:"destructive",className:"m-6",children:[(0,s.jsx)(ed.A,{className:"h-4 w-4"}),(0,s.jsx)(ex,{children:"Error Fetching Videos"}),(0,s.jsx)(eg,{className:"whitespace-pre-line",children:l})]}):!o&&i?null:!i&&o?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[(0,s.jsx)(Z.A,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-headline mb-2",children:"No Channels Added"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Add some YouTube channels using their Channel ID to see videos here."})]}):(0,s.jsxs)(K,{className:"h-full",children:[(0,s.jsxs)("div",{className:"p-4 md:p-6 space-y-4 sticky top-0 bg-background z-10 border-b border-border",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 items-center",children:[(0,s.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[(0,s.jsxs)(ej,{value:d.property,onValueChange:e=>{c({...d,property:e})},children:[(0,s.jsx)(eC,{className:"w-full sm:w-[150px] text-sm","aria-label":"Sort by",children:(0,s.jsx)(eN,{placeholder:"Sort by..."})}),(0,s.jsx)(eI,{children:eR.map(e=>(0,s.jsx)(eS,{value:e.value,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(e.icon,{className:"h-4 w-4 text-muted-foreground"}),e.label]})},e.value))})]}),(0,s.jsx)(h,{variant:"outline",size:"icon",onClick:()=>{c({...d,direction:"asc"===d.direction?"desc":"asc"})},"aria-label":"Toggle sort direction",children:"asc"===d.direction?(0,s.jsx)(ec.A,{className:"h-4 w-4"}):(0,s.jsx)(eu.A,{className:"h-4 w-4"})})]}),(0,s.jsxs)(ej,{value:u,onValueChange:e=>m(e),children:[(0,s.jsxs)(eC,{className:"w-full sm:w-[160px] text-sm","aria-label":"Filter by duration",children:[(0,s.jsx)(eh.A,{className:"h-4 w-4 mr-1 text-muted-foreground inline-block"}),(0,s.jsx)(eN,{placeholder:"Duration..."})]}),(0,s.jsx)(eI,{children:eT.map(e=>(0,s.jsx)(eS,{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)(ej,{value:f,onValueChange:e=>p(e),children:[(0,s.jsxs)(eC,{className:"w-full sm:w-[180px] text-sm","aria-label":"Filter by watch later status",children:[(0,s.jsx)(em.A,{className:"h-4 w-4 mr-1 text-muted-foreground inline-block"}),(0,s.jsx)(eN,{placeholder:"Watch Later..."})]}),(0,s.jsx)(eI,{children:eV.map(e=>(0,s.jsx)(eS,{value:e.value,children:e.label},e.value))})]})]}),o&&i&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground flex flex-wrap gap-x-4 gap-y-1",children:[(0,s.jsxs)("span",{children:["Videos Displayed: ",x.totalUnwatched]}),x.totalUnwatched>0&&(0,s.jsxs)("span",{children:["Avg. Rating: ",x.averageRating]})]})]}),0===t.length&&i&&o&&!n&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 p-6 text-center",children:[(0,s.jsx)(ed.A,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-headline mb-2",children:"All Caught Up or No Matches!"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"No videos match your current filters, or all have been watched/hidden."})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-6 gap-y-8 p-6",children:t.map(e=>(0,s.jsx)(er,{video:e,onMarkAsWatched:a,isWatched:r.includes(e.id),onToggleWatchLater:g,isWatchLater:b.includes(e.id),onHideOnMobile:v,isMobile:y},"".concat(e.channelId,"-").concat(e.id)))})]})}var eE=a(7489);let eP=r.forwardRef((e,t)=>{let{className:a,orientation:r="horizontal",decorative:n=!0,...l}=e;return(0,s.jsx)(eE.b,{ref:t,decorative:n,orientation:r,className:(0,i.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...l})});eP.displayName=eE.b.displayName;var eM=a(594);function eL(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("animate-pulse rounded-md bg-muted",t),...a})}function eO(){let{channels:e,addChannel:t,removeChannel:a,reorderChannels:i}=function(){let[e,t]=n("youtubeChannels",[]);return{channels:e,addChannel:a=>e.find(e=>e.id===a.id)?((0,l.oR)({title:"Channel exists",description:"".concat(a.name," is already in your list."),variant:"default"}),!1):(t(e=>[...e,a]),!0),removeChannel:e=>{t(t=>t.filter(t=>t.id!==e)),(0,l.oR)({title:"Channel Removed",description:"The channel has been removed from your list."})},reorderChannels:(e,a)=>{t(t=>{let s=Array.from(t),[r]=s.splice(e,1);return s.splice(a,0,r),s})},setChannels:t}}(),{watchedVideoIds:o,addWatchedVideo:d,isVideoWatched:c}=function(){let[e,t]=n("watchedVideoIds",[]);return{watchedVideoIds:e,addWatchedVideo:a=>{e.includes(a)||t(e=>[...e,a])},isVideoWatched:t=>e.includes(t)}}(),{watchLaterVideoIds:u,toggleWatchLater:h,isVideoWatchLater:x}=function(){let[e,t]=n("watchLaterVideoIds",[]);return{watchLaterVideoIds:e,toggleWatchLater:(e,a)=>{t(t=>t.includes(e)?((0,l.oR)({title:"Removed from Watch Later",description:'"'.concat(a,'" removed.')}),t.filter(t=>t!==e)):((0,l.oR)({title:"Added to Watch Later",description:'"'.concat(a,'" added.')}),[...t,e]))},isVideoWatchLater:t=>e.includes(t)}}(),{hiddenOnMobileVideoIds:b,addHiddenOnMobileVideo:v,isVideoHiddenOnMobile:y}=function(){let[e,t]=n("hiddenOnMobileVideoIds",[]);return{hiddenOnMobileVideoIds:e,addHiddenOnMobileVideo:(a,s)=>{e.includes(a)||(t(e=>[...e,a]),(0,l.oR)({title:"Video Hidden on Mobile",description:'"'.concat(s,'" will be hidden on this mobile device.')}))},isVideoHiddenOnMobile:t=>e.includes(t),clearHiddenOnMobileVideos:()=>{t([]),(0,l.oR)({title:"Mobile Hidden Videos Cleared",description:"All videos previously hidden on mobile will now be shown."})}}}(),N=function(){let[e,t]=r.useState(void 0);return r.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),a=()=>{t(window.innerWidth<768)};return e.addEventListener("change",a),t(window.innerWidth<768),()=>e.removeEventListener("change",a)},[]),!!e}(),[C,A]=n("allVideosCache",[]),[k,I]=n("shuffledVideoIds",[]),[S,R]=(0,r.useState)(!1),[T,V]=(0,r.useState)(null),[D,E]=n("youtubeApiKey",""),[P,M]=(0,r.useState)({property:"rating",direction:"desc"}),[L,O]=(0,r.useState)("all"),[F,K]=(0,r.useState)("all"),[U,W]=(0,r.useState)(!1),z=(0,r.useRef)(!1),_=(0,r.useRef)(),Y=(0,r.useRef)(!1);(0,r.useEffect)(()=>{W(!0),_.current=JSON.stringify(e.map(e=>e.id).sort())},[]);let J=(0,r.useCallback)(async(e,t)=>{if(!t)throw Error("API Key is not set. Please configure it in the Channel Setup panel.");let a=await w(t,e.youtubeChannelId,20);return 0===a.length?[]:(await j(t,a)).map(e=>{var t,a;let s=function(e){let t;if(!e||!e.startsWith("PT"))return 0;let a=e.substring(2),s=0,r=/(\d+)([HMS])/g;for(;null!==(t=r.exec(a));){let e=parseInt(t[1],10),a=t[2];"H"===a?s+=3600*e:"M"===a?s+=60*e:"S"===a&&(s+=e)}return s}(e.contentDetails.duration),r=parseInt(e.statistics.viewCount,10)||0;return{id:e.id,title:e.snippet.title,link:"https://www.youtube.com/watch?v=".concat(e.id),thumbnailUrl:(null==(t=e.snippet.thumbnails.medium)?void 0:t.url)||(null==(a=e.snippet.thumbnails.standard)?void 0:a.url)||"https://placehold.co/480x360.png?text=".concat(encodeURIComponent(e.snippet.title)),publishedDate:e.snippet.publishedAt,views:r,channelName:e.snippet.channelTitle,channelId:e.snippet.channelId,rating:r,durationSeconds:s}}).filter(e=>null!==e)},[]),q=(0,r.useCallback)(()=>{if(!U||0===e.length||0===C.length)return void I([]);let t=C.filter(t=>e.some(e=>e.youtubeChannelId===t.channelId));if(0===t.length)return void I([]);let a=new Map;for(let e of t)a.has(e.channelId)||a.set(e.channelId,[]),a.get(e.channelId).push(e);a.forEach(e=>{e.sort((e,t)=>{let a=e[P.property],s=t[P.property],r=0;return"number"==typeof a&&"number"==typeof s?r=a-s:"string"==typeof a&&"string"==typeof s?r=a.localeCompare(s):"publishedDate"===P.property&&(r=new Date(a).getTime()-new Date(s).getTime()),"asc"===P.direction?r:-r})});let s=[],r=e.map(e=>e.youtubeChannelId),n=new Map(r.map(e=>[e,0])),l=!0;for(;l;)for(let e of(l=!1,r)){let t=a.get(e),r=n.get(e)||0;t&&r<t.length&&(s.push(t[r]),n.set(e,r+1),l=!0)}I((function(e){let t=[...e];for(let e=t.length-1;e>0;e--){let a=Math.floor(Math.random()*(e+1));[t[e],t[a]]=[t[a],t[e]]}return t})(s).map(e=>e.id))},[U,C,e,P,I]),G=(0,r.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D;if(U){if(!a){V("YouTube API Key is not set. Please add it in the Channel Setup panel to fetch videos."),R(!1);return}if(0===e.length){A([]),V(null),R(!1);return}if(R(!0),V(null),t||0===C.length)try{let s=e.map(e=>J(e,a)),r=await Promise.allSettled(s),n=[],i=!1;r.forEach((t,a)=>{if("fulfilled"===t.status)n.push(...t.value);else{console.error("Error fetching videos for ".concat(e[a].name,":"),t.reason);let s=t.reason instanceof Error?t.reason.message:String(t.reason);V(t=>t?"".concat(t,"\nCould not load videos for ").concat(e[a].name,": ").concat(s):"Could not load videos for ".concat(e[a].name,": ").concat(s)),i=!0}}),0===n.length&&i&&e.length>0||0===n.length&&e.length>0&&!i&&(0,l.oR)({title:"No Videos Found",description:"The selected channels might not have any videos, or all videos are shorter than 3 minutes."});let o=Array.from(new Map(n.map(e=>[e.id,e])).values()).filter(e=>e.durationSeconds>180);A(o),t&&(z.current=!0)}catch(e){console.error("Error aggregating videos:",e),V(e instanceof Error?e.message:"An unknown error occurred during video aggregation."),A([])}finally{R(!1)}else R(!1),e.length>0&&C.length>0&&0===k.length&&q()}},[D,e,J,U,A,C.length,q,k.length]);(0,r.useEffect)(()=>{U&&!Y.current&&(D&&e.length>0?0===C.length?G(!1):0===k.length&&q():!D&&e.length>0?V("YouTube API Key is not set. Please add it to fetch videos."):0===e.length&&(A([]),I([]),V(null)),Y.current=!0)},[D,e,C.length,G,U,q,k.length,A,I]),(0,r.useEffect)(()=>{if(!U||!_.current)return;let t=JSON.stringify(e.map(e=>e.id).sort());_.current!==t&&(e.length>0&&C.length>0?q():0===e.length&&I([])),_.current=t},[e,C,q,U,I]),(0,r.useEffect)(()=>{U&&z.current&&C.length>0&&e.length>0&&(q(),z.current=!1)},[C,e,U,q]);let X=(0,r.useMemo)(()=>{if(!U||!C||0===C.length)return[];let t=new Map(C.map(e=>[e.id,e])),a=k.map(e=>t.get(e)).filter(e=>void 0!==e),s=(a=a.filter(t=>e.some(e=>e.youtubeChannelId===t.channelId))).filter(e=>!c(e.id));return N&&(s=s.filter(e=>!y(e.id))),"all"!==L&&(s=s.filter(e=>{let t=e.durationSeconds;return"short"===L?t<600:"medium"===L?t>=600&&t<=1800:"long"!==L||t>1800})),"watchLaterOnly"===F?s=s.filter(e=>x(e.id)):"notWatchLater"===F&&(s=s.filter(e=>!x(e.id))),s.sort((e,t)=>{let a=e[P.property],s=t[P.property],r=0;return"number"==typeof a&&"number"==typeof s?r=a-s:"string"==typeof a&&"string"==typeof s?r=a.localeCompare(s):"publishedDate"===P.property&&(r=new Date(a).getTime()-new Date(s).getTime()),"asc"===P.direction?r:-r}),s},[U,C,k,e,c,N,y,L,F,x,P]),B=(0,r.useMemo)(()=>{if(!U)return{totalUnwatched:0,averageRating:"0.00"};let e=X.length,t=e>0?X.reduce((e,t)=>e+t.rating,0)/e:0;return{totalUnwatched:e,averageRating:t.toFixed(2)}},[X,U]);return U?(0,s.jsxs)("div",{className:"flex flex-col md:flex-row min-h-screen bg-background text-foreground",children:[(0,s.jsx)("header",{className:"md:hidden p-4 border-b border-border sticky top-0 bg-background z-10",children:(0,s.jsx)("h1",{className:"text-3xl font-headline text-primary",children:"Science Video Viewer"})}),(0,s.jsxs)("aside",{className:"w-full md:w-[380px] lg:w-[420px] p-4 md:p-6 border-r border-border md:min-h-screen md:sticky md:top-0 shrink-0",children:[(0,s.jsxs)("div",{className:"hidden md:block mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-headline text-primary",children:"Science Video Viewer"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Discover and rank science content from YouTube."})]}),(0,s.jsx)(H,{channels:e,onAddChannel:e=>t(e),onRemoveChannel:e=>{a(e)},onReorderChannels:(e,t)=>{i(e,t)},onRefreshVideos:()=>{if(!D)return void(0,l.oR)({title:"API Key Required",description:"Please set your YouTube API Key before refreshing.",variant:"destructive"});(0,l.oR)({title:"Refreshing Videos...",description:"Fetching the latest popular videos from all channels."}),G(!0)},onClearCache:()=>{A([]),I([]),(0,l.oR)({title:"Video Cache Cleared",description:"Local video cache has been emptied."}),D&&e.length>0?G(!0):!D&&e.length>0?V("API Key is not set. Please add it to fetch videos."):V(null)},apiKey:D,onSetApiKey:t=>{E(t),t&&e.length>0?G(!0,t):!t&&e.length>0?V("API Key removed. Videos are shown from cache. Set API Key to fetch new videos."):t&&0===e.length&&V(null)},isLoadingVideos:S,isClientMounted:U})]}),(0,s.jsx)(eP,{orientation:"vertical",className:"hidden md:block h-auto sticky top-0"}),(0,s.jsxs)("main",{className:"flex-1 md:overflow-y-auto",children:[U&&!D&&e.length>0&&(0,s.jsxs)(ep,{variant:"default",className:"m-6 bg-primary/10 border-primary/30",children:[(0,s.jsx)(eM.A,{className:"h-4 w-4 text-primary"}),(0,s.jsx)(ex,{className:"text-primary",children:"API Key Needed"}),(0,s.jsx)(eg,{children:'Please set your YouTube Data API Key in the "Channel Setup" panel on the left to start fetching videos. Make sure to restrict your API key in the Google Cloud Console for security.'})]}),!apiKeyIsSet&&!hasChannels&&U&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[(0,s.jsx)(Z.A,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-headline mb-2",children:"Welcome to Science Video Viewer!"}),(0,s.jsx)("p",{className:"text-muted-foreground max-w-md",children:'To get started, please add your YouTube Data API Key in the "Channel Setup" panel on the left. Then, you can start adding your favorite science YouTube channels.'})]}),(0,s.jsx)(eD,{videos:X,onMarkAsWatched:d,watchedVideoIds:o,isLoading:S&&!!D,error:T,hasChannels:e.length>0,apiKeyIsSet:!!D,sortOption:P,onSortChange:M,durationFilter:L,onDurationFilterChange:O,watchLaterFilter:F,onWatchLaterFilterChange:K,stats:B,onToggleWatchLater:h,watchLaterVideoIds:u,onHideOnMobile:v,isMobile:N,isClientMounted:U})]})]}):(0,s.jsxs)("div",{className:"flex flex-col md:flex-row min-h-screen bg-background text-foreground",children:[(0,s.jsx)("header",{className:"md:hidden p-4 border-b border-border sticky top-0 bg-background z-10",children:(0,s.jsx)("h1",{className:"text-3xl font-headline text-primary",children:"Science Video Viewer"})}),(0,s.jsxs)("aside",{className:"w-full md:w-[380px] lg:w-[420px] p-4 md:p-6 border-r border-border md:min-h-screen md:sticky md:top-0 shrink-0",children:[(0,s.jsxs)("div",{className:"hidden md:block mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-headline text-primary",children:"Science Video Viewer"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Discover and rank science content from YouTube."})]}),(0,s.jsxs)(m,{className:"w-full shadow-xl",children:[(0,s.jsx)(f,{children:(0,s.jsx)(p,{children:"Channel Setup"})}),(0,s.jsxs)(g,{children:[(0,s.jsx)(eL,{className:"h-8 w-full mb-2"}),(0,s.jsx)(eL,{className:"h-8 w-full"})]})]})]}),(0,s.jsx)(eP,{orientation:"vertical",className:"hidden md:block h-auto sticky top-0"}),(0,s.jsx)("main",{className:"flex-1 md:overflow-y-auto",children:(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-6",children:Array.from({length:8}).map((e,t)=>(0,s.jsxs)("div",{className:"bg-card p-4 rounded-lg shadow-lg animate-pulse",children:[(0,s.jsx)(eL,{className:"aspect-video rounded mb-4"}),(0,s.jsx)(eL,{className:"h-4 w-3/4 mb-2"}),(0,s.jsx)(eL,{className:"h-3 w-1/2 mb-2"}),(0,s.jsx)(eL,{className:"h-3 w-1/4"})]},t))})})]})}},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(2596),r=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[774,476,441,684,358],()=>t(2751)),_N_E=e.O()}]);